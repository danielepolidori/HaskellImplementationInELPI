/* Il test dichiara tre vincoli pippo, due su X (con a e c) e
   uno su Y (con b).

   Il predicato (retrieve_constraints X L) prende X in input e mette in L
   la lista di tutti i vincoli su X, rimuovendoli dalla lista dei predicati.

   Nel tuo codice il predicato (pippo X a) deve diventare il fatto di chiedere
   che su X sia dichiarata un'istanza della type-class a. Dopodich√® devi
   trasformare i vincoli in L in uno schema tramite "implies".
*/
test L :-
 declare_constraint (pippo X a) [X],
 declare_constraint (pippo Y b) [Y],
 declare_constraint (pippo X c) [X],
 retrieve_constraints X L.

retrieve_constraints X [Y|L] :-
 declare_constraint (retrieve X Y) [X], !,
 retrieve_constraints X L.

retrieve_constraints X [].

constraint pippo retrieve {
 rule \ (retrieve X Y) (pippo X A) <=> (Y = pippo X A).
 rule \ (retrieve X Y) <=> false.
}
